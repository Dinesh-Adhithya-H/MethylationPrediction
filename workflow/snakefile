# Snakefile

# Prompt user to choose mode
mode = snakemake.config.get("mode", "")

# Check if the chosen mode is valid
valid_modes = ["train", "predict"]
if mode not in valid_modes:
    raise ValueError(f"Invalid mode selected. Please choose one of: {', '.join(valid_modes)}")

# Execute the selected mode's Snakefile using exec()
with open(f"{mode}.smk") as f:
    code = compile(f.read(), f"rules/{mode}.smk", 'exec')
    exec(code, globals(), locals())